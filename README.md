# calculator-lebedev-dm 
# C Калькулятор

Эта программа реализует калькулятор, который может обрабатывать арифметические выражения, содержащие операции сложения (`+`), вычитания (`-`), умножения (`*`), деления (`/`) и круглые скобки (`(`, `)`). Она корректно обрабатывает пробелы в выражениях.

## Как работает программа

Программа использует **рекурсивный нисходящий парсер (Recursive Descent Parser)** для обработки выражений. Она состоит из нескольких ключевых функций:

### 1. `get_number`
Читает число из строки ввода:
```c
int get_number(char **s) {
    int num = 0;
    while (**s && isdigit(**s)) {
        num = num * 10 + (**s - '0');
        (*s)++;
    }
    return num;
}
```

### 2. `eval_expr`
Обрабатывает сложение и вычитание:
```c
int eval_expr(char **s) {
    int res = eval_term(s);
    while (1) {
        while (**s == ' ') (*s)++; // Пропуск пробелов
        if (**s == '+') {
            (*s)++;
            res += eval_term(s);
        } else if (**s == '-') {
            (*s)++;
            res -= eval_term(s);
        } else {
            break;
        }
    }
    return res;
}
```

### 3. `eval_term`
Обрабатывает умножение и деление:
```c
int eval_term(char **s) {
    int res = eval_factor(s);
    while (1) {
        while (**s == ' ') (*s)++; // Пропуск пробелов
        if (**s == '*') {
            (*s)++;
            res *= eval_factor(s);
        } else if (**s == '/') {
            (*s)++;
            res /= eval_factor(s);
        } else {
            break;
        }
    }
    return res;
}
```

### 4. `eval_factor`
Обрабатывает числа и выражения в скобках:
```c
int eval_factor(char **s) {
    while (**s == ' ') (*s)++; // Пропуск пробелов
    if (**s == '(') {
        (*s)++;
        int res = eval_expr(s);
        while (**s == ' ') (*s)++; // Пропуск пробелов
        if (**s == ')') (*s)++;
        return res;
    }
    return get_number(s);
}
```

## Запуск программы

1. Сохраните код в файл `main.c`
2. Скомпилируйте его с помощью `gcc`:
   ```bash
   gcc main.c -o calculator
   ```
3. Запустите программу:
   ```bash
   ./calculator
   ```
4. Введите выражение, например:
   ```
   3 + (2 * 4)
   ```
   Выходной результат:
   ```
   11
   ```

## Зачем это сделано?

- Это учебный пример парсинга арифметических выражений.
- Демонстрация **рекурсивного нисходящего разбора**.
- Обработка приоритетов операций (`+`, `-`, `*`, `/`).
- Поддержка вложенных выражений со скобками.
- Корректная работа с пробелами в строке.

Этот код можно использовать как основу для реализации калькуляторов, компиляторов и интерпретаторов выражений.

